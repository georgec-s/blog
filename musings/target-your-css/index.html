<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <title>@target Your CSS | Snugug</title> <link rel="icon" href="/images/favicon.png"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="google-site-verification" content="zIeV2B7zZKCtEFP-6vV8rKk0ocpbp035v_g3IRn12Jo"> <style type="text/css">a,article,body,code,div,h1,header,html,main,p,pre{font-size:100%;margin:0;padding:0;vertical-align:baseline}article,header,main{display:block}a{background-color:transparent}pre{overflow:auto;white-space:pre;white-space:pre-wrap;white-space:pre-line}.article--title,body{text-rendering:optimizeLegibility}.article--title,pre{word-wrap:break-word}article,body,code,div,h1,header,html,main,p,pre{background:0 0;border:0;outline:0}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;box-sizing:border-box}body{line-height:1;font-weight:400;background:#f8f7f2;color:#2c2a21;-webkit-font-feature-settings:"liga","dlig";-ms-font-feature-settings:"liga","dlig";-o-font-feature-settings:"liga","dlig";font-feature-settings:"liga","dlig"}code,pre{font-size:1em}*,:after,:before{box-sizing:inherit}.article--content{padding:1.21353em 1.61803em}:root{font-size:1.2em;font-family:aller,'Lucida Grande','Lucida Sans Unicode','Lucida Sans',Geneva,Verdana,sans-serif}.base code,.base pre,code,pre{font-family:source-code-pro,'Source Code Pro','Lucida Console','Lucida Sans Typewriter',monaco,'Bitstream Vera Sans Mono',monospace}.base a{text-decoration:none;background-repeat:repeat-x;background-size:.125em .1875em;background-position:0 1.075em;color:#c20030;background-image:-webkit-linear-gradient(bottom,#f8f7f2 75%,#c20030 75%);background-image:linear-gradient(to top,#f8f7f2 75%,#c20030 75%);text-shadow:.0625em .0625em 0 #f8f7f2,-.0625em 0 0 #f8f7f2;text-shadow:.0625em .0625em 0 #f8f7f2,-.0625em -.0625em 0 #f8f7f2,.0625em -.0625em 0 #f8f7f2,-.0625em .0625em 0 #f8f7f2}body *+*{margin-top:1rem}.base p{line-height:1.6;letter-spacing:-.004rem}.base p code{padding:.2em .4em;margin:0;font-size:.85em;background-color:rgba(44,42,33,.1);border-radius:3px}.article--heading{width:100vw;padding:2rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;z-index:-1;background-color:#c20030;background:-webkit-linear-gradient(bottom,rgba(194,0,48,0) 10%,rgba(194,0,48,.05) 10%,rgba(194,0,48,.05) 20%,rgba(194,0,48,.1) 20%,rgba(194,0,48,.1) 30%,rgba(194,0,48,.15) 30%,rgba(194,0,48,.15) 40%,rgba(194,0,48,.2) 40%,rgba(194,0,48,.2) 50%,rgba(194,0,48,.3) 50%,rgba(194,0,48,.3) 60%,rgba(194,0,48,.4) 60%,rgba(194,0,48,.4) 70%,rgba(194,0,48,.5) 70%,rgba(194,0,48,.5) 80%,rgba(194,0,48,.6) 80%,rgba(194,0,48,.6) 90%,rgba(194,0,48,.8) 90%),-webkit-linear-gradient(right,rgba(194,0,48,0) 10%,rgba(194,0,48,.05) 10%,rgba(194,0,48,.05) 20%,rgba(194,0,48,.1) 20%,rgba(194,0,48,.1) 30%,rgba(194,0,48,.15) 30%,rgba(194,0,48,.15) 40%,rgba(194,0,48,.2) 40%,rgba(194,0,48,.2) 50%,rgba(194,0,48,.3) 50%,rgba(194,0,48,.3) 60%,rgba(194,0,48,.4) 60%,rgba(194,0,48,.4) 70%,rgba(194,0,48,.5) 70%,rgba(194,0,48,.5) 80%,rgba(194,0,48,.6) 80%,rgba(194,0,48,.6) 90%,rgba(194,0,48,.8) 90%),#da9400;background:linear-gradient(0deg,rgba(194,0,48,0) 10%,rgba(194,0,48,.05) 10%,rgba(194,0,48,.05) 20%,rgba(194,0,48,.1) 20%,rgba(194,0,48,.1) 30%,rgba(194,0,48,.15) 30%,rgba(194,0,48,.15) 40%,rgba(194,0,48,.2) 40%,rgba(194,0,48,.2) 50%,rgba(194,0,48,.3) 50%,rgba(194,0,48,.3) 60%,rgba(194,0,48,.4) 60%,rgba(194,0,48,.4) 70%,rgba(194,0,48,.5) 70%,rgba(194,0,48,.5) 80%,rgba(194,0,48,.6) 80%,rgba(194,0,48,.6) 90%,rgba(194,0,48,.8) 90%),linear-gradient(-90deg,rgba(194,0,48,0) 10%,rgba(194,0,48,.05) 10%,rgba(194,0,48,.05) 20%,rgba(194,0,48,.1) 20%,rgba(194,0,48,.1) 30%,rgba(194,0,48,.15) 30%,rgba(194,0,48,.15) 40%,rgba(194,0,48,.2) 40%,rgba(194,0,48,.2) 50%,rgba(194,0,48,.3) 50%,rgba(194,0,48,.3) 60%,rgba(194,0,48,.4) 60%,rgba(194,0,48,.4) 70%,rgba(194,0,48,.5) 70%,rgba(194,0,48,.5) 80%,rgba(194,0,48,.6) 80%,rgba(194,0,48,.6) 90%,rgba(194,0,48,.8) 90%),#da9400;min-height:100vh}.article--title{font-weight:700;text-shadow:0 -.005em #111,-.005em 0 #282727,-.005em -.01em #111,-.01em -.005em #282727,-.01em -.015em #111,-.015em -.01em #282727,-.015em -.02em #111,-.02em -.015em #282727,-.02em -.025em #111,-.025em -.02em #282727,-.025em -.03em #111,-.03em -.025em #282727,-.03em -.035em #111,-.035em -.03em #282727,-.035em -.04em #111,-.04em -.035em #282727,-.04em -.045em #111,-.045em -.04em #282727,-.045em -.05em #111,-.05em -.045em #282727,-.05em -.055em #111,-.055em -.05em #282727,-.055em -.06em #111,-.06em -.055em #282727,-.06em -.065em #111,-.065em -.06em #282727,-.065em -.07em #111,-.07em -.065em #282727,-.07em -.075em #111,-.075em -.07em #282727;font-size:2.09881em;-webkit-font-feature-settings:"liga","dlig";-ms-font-feature-settings:"liga","dlig";-o-font-feature-settings:"liga","dlig";font-feature-settings:"liga","dlig";line-height:1.2;max-width:100%;margin:0 0 0 auto;text-align:right;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto;color:#f8f7f2}@media (min-width:20em) and (max-width:22em){.article--title{font-size:calc(2.09881em + .38951 * ((100vw - 20em)/ 2))}}@media (min-width:22em) and (max-width:60em){.article--title{font-size:calc(2.48832em + 2.81629 * ((100vw - 22em)/ 38))}}@media (min-width:60em){.article--title{font-size:5.30461em}}@media (min-width:860px){.article--title{max-width:80%;margin-right:calc(10% - 2rem)}}.article--content{margin:0 auto;max-width:760px;padding-top:1.4rem}@media (min-width:448px){.article--content{padding-top:1.618rem}}._blog{margin-top:0}@supports (display:flex){._blog{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}._blog--article{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}}</style> <script id="loadcss">!function(e,n){!function(e){"use strict";var n=function(n,t,o){var l,r=e.document,d=r.createElement("link");if(t)l=t;else{var i=(r.body||r.getElementsByTagName("head")[0]).childNodes;l=i[i.length-1]}var s=r.styleSheets;d.rel="stylesheet",d.href=n,d.media="only x",l.parentNode.insertBefore(d,t?l:l.nextSibling);var a=function(e){for(var n=d.href,t=s.length;t--;)if(s[t].href===n)return e();setTimeout(function(){a(e)})};return d.onloadcssdefined=a,a(function(){d.media=o||"all"}),d};"undefined"!=typeof module?module.exports=n:e.loadCSS=n}("undefined"!=typeof global?global:this);for(var t in e)loadCSS(e[t],n)}(["/css/style.css"],document.getElementById("loadcss"));</script> <noscript> <link rel="stylesheet" href="/css/style.css"> </noscript> <script>!function(){"use strict";var e,t,n,o,s="/css/fonts.css?bust=0312161035";window.domCL=!1,window.addEventListener("DOMContentLoaded",function(){window.domCL=!0}),window.localStorage&&document.querySelector&&window.XMLHttpRequest&&(e=localStorage.getItem("fonts"),o=localStorage.getItem("fontURL"),e&&o===s?(t=document.querySelector('link[rel="stylesheet"]'),n=window.document.createElement("style"),n.innerHTML=e,t.parentNode.insertBefore(n,t.nextSibling)):window.addEventListener("load",function(){t=new XMLHttpRequest,t.open("GET",s),t.onreadystatechange=function(){localStorage.setItem("fonts",t.responseText),localStorage.setItem("fontURL",s)},t.send()}))}();</script> </head> <body> <div class="_blog"> <main class="_blog--article" itemscope itemtype="http://schema.org/Blog"> <article class="article"> <header class="article--heading"> <h1 class="article--title" itemprop="name">@target Your CSS</h1> </header> <div class="article--content base" itemprop="text"> <p>Way back on January 5, 2012, a feature was made to the Sass issue queue titled <a href="https://github.com/sass/sass/issues/241">separate media/browser specific markup to separate style sheet</a>. The gist of the issue is fairly simple in concept, it’s very useful to be able to maintain styling in a single Sass file (or really, single output CSS file), but be able to spin out the pieces you’d like to enhance/degrade with into their own CSS files automatically. Think writing styling for browsers that support Flexbox and browsers that don’t support Flexbox in the same file, but having two separate CSS files output for the two different levels of support, letting you use something like <a href="http://yepnopejs.com/">yepnope</a> or <a href="https://github.com/filamentgroup/loadCSS">loadCSS</a> to load in only the styling needed. It would make <a href="https://github.com/sass/sass/issues/241#issuecomment-7881980">graceful degradation</a> for legacy browsers easier too. Lots of good things.</p> <p>The general consensus from that thread is that a syntax similar to <code>@target</code> would be great, so you could write Sass that looks like the following:</p> <pre><code class="language-scss">.foo {
  content: bar;
  @target old {
    content: baz;
  }
}
</code></pre> <p>With this syntax proposal, you’d get out the base stylesheet that you wrote (with <code>content: bar</code>) and a file named <code>old.css</code> with <code>content: baz</code>. Fantastic! Except, it hasn’t been implemented yet, so we can’t quite use it yet.</p> <p>But ya know what? I want to use it now. My current <a href="http://pointnorth.io/#partial-structure">best practice of manually doing it</a> makes me sad. I want to do it automatically! I’ve got a bit task runner crazy recently, and after messing around with some Sass, I’ve cracked the case and have made this possible!</p> <p>Introducing <a href="https://github.com/snugug/gulp-css-target">gulp-css-target</a>, a Gulp plugin for post-processing a CSS file into its target parts. Usage is fairly simple, and takes two parts. The first part is a special CSS comment to fence in the code you want. The opening fence should be as follows:</p> <pre><code class="language-scss">/*! @{target: my-awesome-target} */
</code></pre> <p>Then, write any styling you’d like to include under that. The closing fence should look like the following:</p> <pre><code class="language-scss">/*! {target: my-awesome-target}@ */
</code></pre> <p>You can have multiple of the same targets in the same stylesheet, they’ll get added in order. Once you’ve got those comments in, create a Gulp task and pipe your CSS into <code>target</code> and back out to where you’d like it to go!</p> <pre><code class="language-scss">var gulp = require(&#39;gulp&#39;);
var target = require(&#39;gulp-css-target&#39;);

// Same Directory
gulp.task(&#39;target&#39;, function () {
  return gulp.src(&#39;css/**/*.css&#39;)
    .pipe(target())
    .pipe(gulp.dest(&#39;css/&#39;));
});
</code></pre> <p>This will create a <code>my-awesome-target.css</code> file in your CSS directory, put your targeted styling into that file (without comments), and remove the targeted styling from your source file. Yay!</p> <p>Now for some bonus material! <a href="https://github.com/Team-Sass/toolkit">Toolkit 2.4.0</a> includes a <a href="https://github.com/Team-Sass/toolkit#target"><code>@include target</code> mixin</a> to make writing these special comments easy! This mixin requires Sass 3.3.x or greater as it relies upon <code>@at-root</code>. The actual mixin is fairly simple, you can simply include it yourself if you’d like:</p> <pre><code class="language-scss">@mixin target($target) {
  @at-root {
    /*! @{target: #{$target}} */
    &amp; {
      @content;  
    }
    /*! {target: #{$target}}@ */  
  }
}
</code></pre> <p>While I haven’t (and honestly probably won’t) write mixins for other preprocessors, it should be do-able with similar features, or just by hand. That makes <code>gulp-css-target</code> usable with any preprocessor, including not using one at all.</p> <p>Enjoy everyone!</p> </div> <footer class="article--author"> <span class="article--published" itemprop="datePublished">Published on <time datetime="2016-03-12">June 15th, 2014</time></span> </footer> </article> </main> <footer class="_blog--footer"> <div class="footer"> <ul class="footer--links"> <li class="footer--link-item"> <a href="/" class="footer--link">Home</a> </li> <li class="footer--link-item"> <a href="/me" class="footer--link">Me</a> </li> <li class="footer--link-item"> <a href="/presentations" class="footer--link">Presentations</a> </li> <li class="footer--link-item"> <a href="/musings" class="footer--link">Musings</a> </li> </ul> </div> </footer> </div> <script src="/js/app.js" async defer></script> <script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-30577396-1","auto"),ga("send","pageview");</script> </body> </html> 